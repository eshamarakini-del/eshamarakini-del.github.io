<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ Test - Capital Workspace</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #fafafa;
            --text-primary: #0a0a0a;
            --text-secondary: #666666;
            --border: #e8e8e8;
            --accent: #0a0a0a;
            --hover: #f5f5f5;
            --success: #16a34a;
            --error: #dc2626;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        header {
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.5rem 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.125rem;
            font-weight: 500;
        }

        .logo a {
            text-decoration: none;
            color: var(--text-primary);
        }

        .header-right {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .back-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            color: var(--text-primary);
        }

        .back-btn:hover {
            background: var(--hover);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 3rem 3rem 6rem;
        }

        .test-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .test-header h1 {
            font-size: 2rem;
            font-weight: 600;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
        }

        .test-header p {
            color: var(--text-secondary);
        }

        .progress-bar {
            background: var(--border);
            height: 4px;
            border-radius: 2px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-fill {
            background: var(--accent);
            height: 100%;
            transition: width 0.3s ease;
        }

        .question-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .question-card {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .question-text {
            font-size: 1.125rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option:hover {
            border-color: var(--accent);
            background: var(--hover);
        }

        .option.selected {
            border-color: var(--accent);
            background: var(--hover);
        }

        .option.correct {
            border-color: var(--success);
            background: #f0fdf4;
        }

        .option.incorrect {
            border-color: var(--error);
            background: #fef2f2;
        }

        .option input {
            display: none;
        }

        .option-label {
            display: flex;
            align-items: center;
            width: 100%;
        }

        .option-letter {
            width: 28px;
            height: 28px;
            border: 1px solid var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 500;
            margin-right: 1rem;
            flex-shrink: 0;
        }

        .option.selected .option-letter {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .option.correct .option-letter {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .option.incorrect .option-letter {
            background: var(--error);
            color: white;
            border-color: var(--error);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--bg-primary);
            font-size: 0.9375rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .nav-btn:hover:not(:disabled) {
            border-color: var(--accent);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn.primary {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .nav-btn.primary:hover {
            opacity: 0.85;
        }

        /* Start Screen */
        .start-screen {
            text-align: center;
            padding: 4rem 2rem;
        }

        .start-screen h1 {
            font-size: 2.5rem;
            font-weight: 600;
            letter-spacing: -0.02em;
            margin-bottom: 1rem;
        }

        .start-screen p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .start-btn {
            padding: 1rem 2rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .start-btn:hover {
            opacity: 0.85;
        }

        .test-info {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .info-item {
            text-align: center;
        }

        .info-item .value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .info-item .label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Results Screen */
        .results-screen {
            text-align: center;
            padding: 3rem 2rem;
        }

        .results-screen h1 {
            font-size: 2rem;
            font-weight: 600;
            letter-spacing: -0.02em;
            margin-bottom: 1rem;
        }

        .score-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: 8px solid var(--border);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 2rem auto;
        }

        .score-circle.excellent {
            border-color: var(--success);
        }

        .score-circle.good {
            border-color: #f59e0b;
        }

        .score-circle.poor {
            border-color: var(--error);
        }

        .score-number {
            font-size: 3rem;
            font-weight: 600;
            line-height: 1;
        }

        .score-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .results-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .stat-value.correct {
            color: var(--success);
        }

        .stat-value.incorrect {
            color: var(--error);
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .results-message {
            font-size: 1.125rem;
            margin-bottom: 2rem;
            color: var(--text-secondary);
        }

        .results-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .header-content,
            .container {
                padding-left: 1.5rem;
                padding-right: 1.5rem;
            }

            .start-screen h1 {
                font-size: 2rem;
            }

            .test-info {
                gap: 1.5rem;
            }

            .results-stats {
                gap: 2rem;
            }

            .navigation {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo"><a href="capital-workspace.html">Capital Workspace</a></div>
            <div class="header-right">
                <a href="capital-workspace.html" class="back-btn">Back to Workspace</a>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Start Screen -->
        <div id="startScreen" class="start-screen">
            <h1>NBFC Knowledge Assessment</h1>
            <p>Test your knowledge with this comprehensive 50-question assessment covering Non-Banking Financial Companies (NBFCs) - regulations, types, compliance, and governance.</p>
            <div class="test-info">
                <div class="info-item">
                    <div class="value">50</div>
                    <div class="label">Questions</div>
                </div>
                <div class="info-item">
                    <div class="value">No</div>
                    <div class="label">Time Limit</div>
                </div>
                <div class="info-item">
                    <div class="value">1</div>
                    <div class="label">Point Each</div>
                </div>
            </div>
            <button class="start-btn" onclick="startTest()">Start Test</button>
        </div>

        <!-- Test Screen -->
        <div id="testScreen" class="hidden">
            <div class="test-header">
                <h1>NBFC Knowledge Assessment</h1>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="question-info">
                <span id="questionNumber">Question 1 of 50</span>
                <span id="currentScore">Score: 0</span>
            </div>

            <div class="question-card">
                <div class="question-text" id="questionText"></div>
                <div class="options" id="optionsContainer"></div>
            </div>

            <div class="navigation">
                <button class="nav-btn" id="prevBtn" onclick="prevQuestion()" disabled>Previous</button>
                <button class="nav-btn primary" id="nextBtn" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden results-screen">
            <h1>Test Complete!</h1>
            <div class="score-circle" id="scoreCircle">
                <div class="score-number" id="finalScore">0%</div>
                <div class="score-label">Score</div>
            </div>
            <div class="results-stats">
                <div class="stat-item">
                    <div class="stat-value correct" id="correctCount">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value incorrect" id="incorrectCount">0</div>
                    <div class="stat-label">Incorrect</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="unansweredCount">0</div>
                    <div class="stat-label">Unanswered</div>
                </div>
            </div>
            <p class="results-message" id="resultsMessage"></p>
            <div class="results-actions">
                <button class="nav-btn" onclick="reviewAnswers()">Review Answers</button>
                <button class="nav-btn primary" onclick="restartTest()">Try Again</button>
            </div>
        </div>

        <!-- Review Screen -->
        <div id="reviewScreen" class="hidden">
            <div class="test-header">
                <h1>Review Answers</h1>
                <p>See which questions you got right and wrong</p>
            </div>

            <div id="reviewContainer"></div>

            <div class="navigation" style="margin-top: 2rem;">
                <button class="nav-btn" onclick="backToResults()">Back to Results</button>
                <button class="nav-btn primary" onclick="restartTest()">Try Again</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "What does NBFC stand for?",
                options: ["Non-Banking Financial Company", "National Banking Finance Corporation", "Non-Business Financial Corporation", "National Business Finance Company"],
                correct: 0
            },
            {
                question: "Which Act governs the registration and regulation of NBFCs in India?",
                options: ["Banking Regulation Act, 1949", "Reserve Bank of India Act, 1934", "Companies Act, 2013", "SEBI Act, 1992"],
                correct: 1
            },
            {
                question: "What is the minimum Net Owned Fund (NOF) required for registration of an NBFC?",
                options: ["Rs. 1 crore", "Rs. 2 crore", "Rs. 5 crore", "Rs. 10 crore"],
                correct: 1
            },
            {
                question: "Which of the following is NOT a type of NBFC?",
                options: ["NBFC-ICC", "NBFC-MFI", "NBFC-Factor", "NBFC-Retail"],
                correct: 3
            },
            {
                question: "What is the principal business criteria for an NBFC?",
                options: ["Financial assets must be more than 50% of total assets and income from financial assets must be more than 50% of gross income", "Financial assets must be 100% of total assets", "Income from financial assets must be 75% of gross income", "Total assets must exceed Rs. 500 crore"],
                correct: 0
            },
            {
                question: "What does NBFC-ICC stand for?",
                options: ["Investment and Credit Company", "Insurance and Credit Corporation", "Investment and Capital Corporation", "Insurance and Capital Company"],
                correct: 0
            },
            {
                question: "Which NBFCs are allowed to accept public deposits?",
                options: ["All NBFCs registered with RBI", "Only those with specific authorization from RBI", "Only NBFCs with NOF above Rs. 100 crore", "No NBFCs can accept public deposits"],
                correct: 1
            },
            {
                question: "What is the maximum period for which an NBFC-D can accept deposits?",
                options: ["36 months", "48 months", "60 months", "84 months"],
                correct: 2
            },
            {
                question: "What is the minimum period for which an NBFC-D can accept deposits?",
                options: ["6 months", "12 months", "24 months", "36 months"],
                correct: 1
            },
            {
                question: "What is an NBFC-MFI?",
                options: ["Micro Finance Institution", "Major Finance Institution", "Medium Finance Institution", "Mutual Fund Institution"],
                correct: 0
            },
            {
                question: "What percentage of the total assets of NBFC-MFI should be in the nature of qualifying assets?",
                options: ["50%", "65%", "75%", "85%"],
                correct: 3
            },
            {
                question: "What is the maximum loan amount that can be given by an NBFC-MFI for income generation purposes?",
                options: ["Rs. 50,000", "Rs. 75,000", "Rs. 1,00,000", "Rs. 1,25,000"],
                correct: 3
            },
            {
                question: "What is a Systemically Important NBFC (NBFC-SI)?",
                options: ["NBFC with asset size of Rs. 100 crore and above", "NBFC with asset size of Rs. 500 crore and above", "NBFC with asset size of Rs. 1000 crore and above", "Any NBFC accepting public deposits"],
                correct: 1
            },
            {
                question: "What is the minimum CRAR (Capital to Risk Weighted Assets Ratio) for NBFCs?",
                options: ["9%", "12%", "15%", "18%"],
                correct: 2
            },
            {
                question: "What is Tier I capital for an NBFC?",
                options: ["Subordinated debt only", "Paid-up equity capital, free reserves, and certain other components minus intangible assets", "Only retained earnings", "Deposits from public"],
                correct: 1
            },
            {
                question: "What is the asset classification norm for Standard Assets in NBFCs?",
                options: ["No overdue payments", "Overdue for less than 90 days", "Overdue for less than 180 days", "Overdue for less than 30 days"],
                correct: 1
            },
            {
                question: "When does an asset become a Non-Performing Asset (NPA) for an NBFC?",
                options: ["When overdue for 30 days", "When overdue for 60 days", "When overdue for 90 days", "When overdue for 180 days"],
                correct: 2
            },
            {
                question: "What is a Sub-standard Asset?",
                options: ["An asset which has remained NPA for a period less than or equal to 12 months", "An asset which has remained NPA for more than 12 months", "An asset where loss has been identified but not written off", "A standard asset with potential weakness"],
                correct: 0
            },
            {
                question: "What is a Doubtful Asset?",
                options: ["An asset which has remained in sub-standard category for 12 months", "An asset overdue for 90 days", "An asset with 50% provision", "A restructured asset"],
                correct: 0
            },
            {
                question: "What is the provisioning requirement for Standard Assets for NBFC-ICC?",
                options: ["0.25%", "0.40%", "0.50%", "1.00%"],
                correct: 1
            },
            {
                question: "What is the provisioning requirement for Sub-standard Assets for NBFCs?",
                options: ["5%", "10%", "15%", "20%"],
                correct: 1
            },
            {
                question: "Which regulatory framework covers KYC norms for NBFCs?",
                options: ["Master Direction on KYC", "PMLA, 2002", "Both A and B", "Companies Act, 2013"],
                correct: 2
            },
            {
                question: "What is Customer Due Diligence (CDD)?",
                options: ["Collecting customer feedback", "Identifying and verifying customer identity", "Providing loans to customers", "Filing returns with RBI"],
                correct: 1
            },
            {
                question: "What is Enhanced Due Diligence (EDD)?",
                options: ["Standard KYC procedures", "Additional scrutiny for high-risk customers", "Basic identity verification", "Annual review of accounts"],
                correct: 1
            },
            {
                question: "What is the threshold for reporting Suspicious Transaction Reports (STRs)?",
                options: ["Rs. 10 lakh", "Rs. 50 lakh", "No threshold - based on nature of transaction", "Rs. 1 crore"],
                correct: 2
            },
            {
                question: "What is the threshold for Cash Transaction Reports (CTRs)?",
                options: ["Rs. 5 lakh", "Rs. 10 lakh", "Rs. 15 lakh", "Rs. 20 lakh"],
                correct: 1
            },
            {
                question: "What is the Fair Practices Code (FPC)?",
                options: ["Code for employee conduct", "Code for fair and transparent dealing with customers", "Code for regulatory compliance", "Code for internal audit"],
                correct: 1
            },
            {
                question: "What is the purpose of SARFAESI Act?",
                options: ["Registration of NBFCs", "Recovery of dues without court intervention", "Accepting public deposits", "Granting loans to priority sector"],
                correct: 1
            },
            {
                question: "What is an NBFC-Factor?",
                options: ["An NBFC whose principal business is factoring", "An NBFC dealing in insurance", "An NBFC providing housing finance", "An NBFC dealing in securities"],
                correct: 0
            },
            {
                question: "What is the definition of factoring activity?",
                options: ["Purchasing receivables from sellers of goods/services", "Providing housing loans", "Accepting deposits", "Trading in securities"],
                correct: 0
            },
            {
                question: "What is an NBFC-P2P (Peer to Peer Lending Platform)?",
                options: ["Platform providing loans to individuals only", "Online platform bringing lenders and borrowers together", "Platform for share trading", "Platform for insurance distribution"],
                correct: 1
            },
            {
                question: "What is the maximum exposure a lender can have across all P2P platforms?",
                options: ["Rs. 10 lakh", "Rs. 25 lakh", "Rs. 50 lakh", "Rs. 1 crore"],
                correct: 2
            },
            {
                question: "What is an NBFC-AA (Account Aggregator)?",
                options: ["Company that consolidates financial accounts", "Non-deposit taking NBFC engaged in consent-based data sharing", "Company that aggregates insurance policies", "Company that provides credit scores"],
                correct: 1
            },
            {
                question: "What is Scale Based Regulation (SBR) framework for NBFCs?",
                options: ["Regulation based on geographical location", "Regulation based on type of customers", "Regulation based on size, activity, and perceived riskiness", "Regulation based on ownership pattern"],
                correct: 2
            },
            {
                question: "Under SBR, how many layers are NBFCs categorized into?",
                options: ["Two", "Three", "Four", "Five"],
                correct: 2
            },
            {
                question: "What is the Base Layer in Scale Based Regulation?",
                options: ["NBFCs with assets above Rs. 1000 crore", "Non-deposit taking NBFCs below Rs. 1000 crore asset size", "All deposit-taking NBFCs", "Systemically important NBFCs"],
                correct: 1
            },
            {
                question: "What is the Middle Layer in Scale Based Regulation?",
                options: ["Base Layer NBFCs only", "Deposit-taking NBFCs, NBFCs with asset size of Rs. 1000 crore and above", "Only government NBFCs", "NBFCs with foreign investment"],
                correct: 1
            },
            {
                question: "What is NBFC-UL (Upper Layer)?",
                options: ["Top 10 NBFCs by asset size plus NBFCs specifically identified by RBI", "All systemically important NBFCs", "NBFCs with foreign investment", "NBFCs accepting public deposits"],
                correct: 0
            },
            {
                question: "What is the minimum Tier 1 capital requirement for NBFC-UL?",
                options: ["8%", "9%", "10%", "12%"],
                correct: 2
            },
            {
                question: "What is the Liquidity Coverage Ratio (LCR) requirement for non-deposit taking NBFCs with asset size Rs. 10,000 crore and above?",
                options: ["50%", "60%", "85%", "100%"],
                correct: 2
            },
            {
                question: "What is the concept of Principal Officer in context of AML/CFT?",
                options: ["CEO of the company", "Designated officer responsible for AML compliance", "External auditor", "Board chairman"],
                correct: 1
            },
            {
                question: "What is the Corporate Governance requirement for NBFCs in Upper Layer?",
                options: ["No specific requirement", "Same as Middle Layer", "Governance standards comparable to banks", "Self-regulation"],
                correct: 2
            },
            {
                question: "What is NPA in the context of NBFCs?",
                options: ["Net Profit After tax", "Non-Performing Asset", "New Payment Architecture", "National Payment Authorization"],
                correct: 1
            },
            {
                question: "What is the primary regulator for Housing Finance Companies (HFCs)?",
                options: ["SEBI", "RBI", "NHB", "IRDAI"],
                correct: 1
            },
            {
                question: "What is an Infrastructure Finance Company (IFC)?",
                options: ["Any NBFC lending to infrastructure", "NBFC with minimum 75% of assets in infrastructure loans with minimum NOF of Rs. 300 crore", "Government company for infrastructure development", "NBFC registered under Companies Act only"],
                correct: 1
            },
            {
                question: "What is concentration norm?",
                options: ["Minimum lending to priority sector", "Limits on exposure to single borrower or group of borrowers", "Investment in government securities", "Deposit mobilization limits"],
                correct: 1
            },
            {
                question: "What is the single borrower exposure limit for NBFCs?",
                options: ["10% of capital funds", "15% of capital funds", "20% of capital funds", "25% of capital funds"],
                correct: 3
            },
            {
                question: "What is the group borrower exposure limit for NBFCs?",
                options: ["25% of capital funds", "35% of capital funds", "40% of capital funds", "50% of capital funds"],
                correct: 2
            },
            {
                question: "What is the role of RBI in NBFC regulation?",
                options: ["Only registration", "Registration, regulation, and supervision", "Only supervision", "Advisory role only"],
                correct: 1
            },
            {
                question: "What is the timeline for periodic reporting to RBI for NBFC-Middle Layer?",
                options: ["Monthly", "Quarterly", "Half-yearly", "Annually"],
                correct: 1
            }
        ];

        let currentQuestion = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let testStarted = false;
        let reviewMode = false;

        function startTest() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('testScreen').classList.remove('hidden');
            testStarted = true;
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            const progress = ((currentQuestion + 1) / questions.length) * 100;

            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('questionNumber').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            document.getElementById('currentScore').textContent = `Score: ${calculateScore()}`;
            document.getElementById('questionText').textContent = question.question;

            const optionsHtml = question.options.map((option, index) => {
                const letters = ['A', 'B', 'C', 'D'];
                const selectedClass = userAnswers[currentQuestion] === index ? 'selected' : '';
                return `
                    <label class="option ${selectedClass}" onclick="selectOption(${index})">
                        <input type="radio" name="answer" value="${index}">
                        <span class="option-label">
                            <span class="option-letter">${letters[index]}</span>
                            <span>${option}</span>
                        </span>
                    </label>
                `;
            }).join('');

            document.getElementById('optionsContainer').innerHTML = optionsHtml;

            document.getElementById('prevBtn').disabled = currentQuestion === 0;

            if (currentQuestion === questions.length - 1) {
                document.getElementById('nextBtn').textContent = 'Finish';
            } else {
                document.getElementById('nextBtn').textContent = 'Next';
            }
        }

        function selectOption(index) {
            userAnswers[currentQuestion] = index;

            document.querySelectorAll('.option').forEach((opt, i) => {
                opt.classList.remove('selected');
                if (i === index) {
                    opt.classList.add('selected');
                }
            });
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResults();
            }
        }

        function calculateScore() {
            let score = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === questions[index].correct) {
                    score++;
                }
            });
            return score;
        }

        function showResults() {
            document.getElementById('testScreen').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');

            const score = calculateScore();
            const percentage = Math.round((score / questions.length) * 100);
            const incorrect = userAnswers.filter((answer, index) => answer !== null && answer !== questions[index].correct).length;
            const unanswered = userAnswers.filter(answer => answer === null).length;

            document.getElementById('finalScore').textContent = percentage + '%';
            document.getElementById('correctCount').textContent = score;
            document.getElementById('incorrectCount').textContent = incorrect;
            document.getElementById('unansweredCount').textContent = unanswered;

            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.classList.remove('excellent', 'good', 'poor');

            let message = '';
            if (percentage >= 80) {
                scoreCircle.classList.add('excellent');
                message = 'Excellent work! You have a strong understanding of the material.';
            } else if (percentage >= 60) {
                scoreCircle.classList.add('good');
                message = 'Good job! You have a solid foundation, but there\'s room for improvement.';
            } else {
                scoreCircle.classList.add('poor');
                message = 'Keep practicing! Review the material and try again.';
            }

            document.getElementById('resultsMessage').textContent = message;
        }

        function reviewAnswers() {
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('reviewScreen').classList.remove('hidden');
            reviewMode = true;

            const reviewHtml = questions.map((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct;
                const letters = ['A', 'B', 'C', 'D'];

                const optionsHtml = question.options.map((option, optIndex) => {
                    let optionClass = '';
                    if (optIndex === question.correct) {
                        optionClass = 'correct';
                    } else if (optIndex === userAnswer && !isCorrect) {
                        optionClass = 'incorrect';
                    }

                    return `
                        <div class="option ${optionClass}" style="cursor: default;">
                            <span class="option-label">
                                <span class="option-letter">${letters[optIndex]}</span>
                                <span>${option}</span>
                            </span>
                        </div>
                    `;
                }).join('');

                return `
                    <div class="question-card" style="margin-bottom: 1.5rem;">
                        <div class="question-info" style="margin-bottom: 1rem;">
                            <span>Question ${index + 1}</span>
                            <span style="color: ${isCorrect ? 'var(--success)' : userAnswer === null ? 'var(--text-secondary)' : 'var(--error)'}">
                                ${isCorrect ? 'Correct' : userAnswer === null ? 'Unanswered' : 'Incorrect'}
                            </span>
                        </div>
                        <div class="question-text">${question.question}</div>
                        <div class="options">${optionsHtml}</div>
                    </div>
                `;
            }).join('');

            document.getElementById('reviewContainer').innerHTML = reviewHtml;
        }

        function backToResults() {
            document.getElementById('reviewScreen').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            reviewMode = false;
        }

        function restartTest() {
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            reviewMode = false;

            document.getElementById('startScreen').classList.remove('hidden');
            document.getElementById('testScreen').classList.add('hidden');
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('reviewScreen').classList.add('hidden');
        }
    </script>
</body>
</html>
